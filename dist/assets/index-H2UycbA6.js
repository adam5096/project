import{J as v,d as J,r as f,G as K,e as u,o as _,v as w,w as t,h as p,g as e,m as V,C,j as i,t as y,F as z,q as I,f as N,K as h,p as P,k as O,_ as Q}from"./index-nEBEK9n6.js";const W=(l,n)=>v.get(`/admin/product/list/${l}/${n}`),X=l=>v.get("/admin/product/onSale/"+l),Y=l=>v.get("/admin/product/cancelSale/"+l),Z=l=>v.get("/admin/product/getSkuInfo/"+l),ee=l=>v.delete("/admin/product/deleteSku/"+l),te=l=>(P("data-v-0e09560b"),l=l(),O(),l),ae=["src"],le=te(()=>V("h4",null,"set title by slot",-1)),se=["src"],ne=J({__name:"index",setup(l){let n=f(1),x=f(10),q=f(0),b=f([]),k=f(!1),c=f({});K(()=>{m()});const m=async(r=1)=>{n.value=r;let s=await W(n.value,x.value);s.code==200&&(q.value=s.data.total,b.value=s.data.records)},L=()=>{m()},A=async r=>{r.isSale==1?(await Y(r.id),h({type:"success",message:"下架 成功"}),m(n.value)):(await X(r.id),h({type:"success",message:"上架 成功"}),m(n.value))},U=()=>{h({type:"success",message:"工程師加班更新中"})},E=async r=>{k.value=!0;let s=await Z(r.id);c.value=s.data},F=async r=>{(await ee(r)).code==200?(h({type:"success",message:"刪除 成功"}),m(b.value.length>1?n.value:n.value-1)):h({type:"error",message:"系统数据，不能删除"})};return(r,s)=>{const d=u("el-table-column"),S=u("el-button"),$=u("el-popconfirm"),j=u("el-table"),M=u("el-pagination"),o=u("el-col"),g=u("el-row"),B=u("el-tag"),R=u("el-carousel-item"),T=u("el-carousel"),G=u("el-drawer"),H=u("el-card");return _(),w(H,null,{default:t(()=>[e(j,{border:"",style:{margin:"10px 0px"},data:p(b)},{default:t(()=>[e(d,{label:"序號",type:"index",align:"center",width:"80px"}),e(d,{label:"名稱","show-overflow-tooltip":"",width:"150px",prop:"skuName"}),e(d,{label:"描述","show-overflow-tooltip":"",width:"150px",prop:"skuDesc"}),e(d,{label:"圖片",width:"150px"},{default:t(({row:a})=>[V("img",{src:a.skuDefaultImg,style:{width:"100px",height:"100px"}},null,8,ae)]),_:1}),e(d,{label:"重量(g)",width:"150px",prop:"weight"}),e(d,{label:"價格",width:"150px",prop:"price"}),e(d,{label:"操作",width:"250px",fixed:"right"},{default:t(({row:a})=>[e(S,{type:"success",size:"small",icon:a.isSale==1?"Bottom":"Top",plain:"",onClick:D=>A(a)},null,8,["icon","onClick"]),e(S,{type:"warning",size:"small",icon:"Edit",plain:"",onClick:U}),e(S,{type:"primary",size:"small",icon:"InfoFilled",plain:"",onClick:D=>E(a)},null,8,["onClick"]),e($,{title:`確定刪除 ${a.skuName}?`,width:"200px",onConfirm:D=>F(a.id)},{reference:t(()=>[e(S,{type:"danger",size:"small",icon:"Delete",plain:""})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(M,{"current-page":p(n),"onUpdate:currentPage":s[0]||(s[0]=a=>C(n)?n.value=a:n=a),"page-size":p(x),"onUpdate:pageSize":s[1]||(s[1]=a=>C(x)?x.value=a:x=a),"page-sizes":[10,20,30,40],background:!0,layout:" prev, pager, next, jumper,->,total, sizes",total:p(q),onCurrentChange:m,onSizeChange:L},null,8,["current-page","page-size","total"]),e(G,{modelValue:p(k),"onUpdate:modelValue":s[2]||(s[2]=a=>C(k)?k.value=a:k=a)},{header:t(()=>[le]),default:t(()=>[e(g,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[i("名稱")]),_:1}),e(o,{span:18},{default:t(()=>[i(y(p(c).skuName),1)]),_:1})]),_:1}),e(g,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[i("描述")]),_:1}),e(o,{span:18},{default:t(()=>[i(y(p(c).skuDesc),1)]),_:1})]),_:1}),e(g,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[i("價格")]),_:1}),e(o,{span:18},{default:t(()=>[i(y(p(c).price),1)]),_:1})]),_:1}),e(g,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[i("平台屬性")]),_:1}),e(o,{span:18},{default:t(()=>[(_(!0),N(z,null,I(p(c).skuAttrValueList,a=>(_(),w(B,{style:{margin:"5px"},key:a.id},{default:t(()=>[i(y(a.valueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(g,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[i("銷售屬性")]),_:1}),e(o,{span:18},{default:t(()=>[(_(!0),N(z,null,I(p(c).skuSaleAttrValueList,a=>(_(),w(B,{style:{margin:"5px"},key:a.id},{default:t(()=>[i(y(a.saleAttrValueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(g,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[i("商品圖片")]),_:1}),e(o,{span:18},{default:t(()=>[e(T,{interval:4e3,type:"card",height:"200px","indicator-position":"outside"},{default:t(()=>[(_(!0),N(z,null,I(p(c).skuImageList,a=>(_(),w(R,{key:a.id},{default:t(()=>[V("img",{src:a.imgUrl,alt:"圖片",style:{width:"100%",height:"100%"}},null,8,se)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),ue=Q(ne,[["__scopeId","data-v-0e09560b"]]);export{ue as default};
