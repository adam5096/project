import{J as c,d as z,r as y,c as A,G as B,e as i,o as N,f as O,g as e,w as t,t as D,j as u,h as d,C,m as E,F,K as V,_ as R}from"./index-abAMUYV-.js";const T=()=>c.get("/admin/acl/permission"),w=m=>m.id?c.put("/admin/acl/permission/update",m):c.post("/admin/acl/permission/save",m),G=m=>c.delete("/admin/acl/permission/remove/"+m),H={class:"dialog-footer"},I=z({__name:"index",setup(m){let f=y([]),s=y(!1),a=A({code:"",level:0,name:"",pid:0});B(()=>{_()});const _=async()=>{let o=await T();o.code==200&&(f.value=o.data)},k=o=>{Object.assign(a,{id:0,code:"",level:0,name:"",pid:0}),s.value=!0,a.level=o.level+1,a.pid=o.id},x=o=>{s.value=!0,Object.assign(a,o)},M=async()=>{(await w(a)).code==200&&(s.value=!1,V({type:"success",message:a.id?"修改 成功":"新增 成功"}),_())},P=async o=>{(await G(o)).code==200&&(V({type:"success",message:"刪除 成功"}),_())};return(o,n)=>{const p=i("el-table-column"),r=i("el-button"),q=i("el-popconfirm"),U=i("el-table"),v=i("el-input"),b=i("el-form-item"),$=i("el-form"),j=i("el-dialog");return N(),O(F,null,[e(U,{data:d(f),style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:""},{default:t(()=>[e(p,{label:"名稱",prop:"name"}),e(p,{label:"權限值",prop:"code"}),e(p,{label:"修改時間",prop:"updateTime"}),e(p,{label:"操作"},{default:t(({row:l})=>[e(r,{type:"primary",onClick:g=>k(l),size:"small",plain:"",disabled:l.level==4},{default:t(()=>[u(D(l.level==3?"新增功能":"新增選單"),1)]),_:2},1032,["onClick","disabled"]),e(r,{type:"warning",onClick:g=>x(l),size:"small",plain:"",disabled:l.level==1},{default:t(()=>[u("修改")]),_:2},1032,["onClick","disabled"]),e(q,{title:`確定刪除 ${l.name} ?`,width:"260px",onConfirm:g=>P(l.id)},{reference:t(()=>[e(r,{onClick:n[0]||(n[0]=()=>{}),type:"danger",size:"small",plain:"",disabled:l.level==1},{default:t(()=>[u("刪除")]),_:2},1032,["disabled"])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(j,{modelValue:d(s),"onUpdate:modelValue":n[4]||(n[4]=l=>C(s)?s.value=l:s=l),title:d(a).id?"修改選單":"新增選單"},{footer:t(()=>[E("div",H,[e(r,{onClick:n[3]||(n[3]=l=>C(s)?s.value=!1:s=!1)},{default:t(()=>[u("取消")]),_:1}),e(r,{type:"primary",onClick:M},{default:t(()=>[u(" 確定 ")]),_:1})])]),default:t(()=>[e($,null,{default:t(()=>[e(b,{label:"名稱"},{default:t(()=>[e(v,{placeholder:"請輸入要新增的 選單名稱",modelValue:d(a).name,"onUpdate:modelValue":n[1]||(n[1]=l=>d(a).name=l)},null,8,["modelValue"])]),_:1}),e(b,{label:"權限"},{default:t(()=>[e(v,{placeholder:"請輸入要新增的 權限值",modelValue:d(a).code,"onUpdate:modelValue":n[2]||(n[2]=l=>d(a).code=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])],64)}}}),K=R(I,[["__scopeId","data-v-e3e09aa4"]]);export{K as default};
